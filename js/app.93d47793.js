(function(){"use strict";var e={3009:function(e,s,n){var t=n(9242),a=(n(7658),n(3396)),o=n(4870),r=n(7853),i=n(7139);const l={id:"aphorisms-banner"},u={class:"tile"},c={id:"aphorisms-banner-title"},p={id:"aphorisms-banner-subtitle"},g={id:"aphorisms-banner-right"};var f=(0,a.aZ)({__name:"AphorismsBanner",props:{clearMessages:{type:Function}},setup(e){const{t:s,locale:n,availableLocales:t}=(0,r.QT)();function o(e){console.log(n.value),console.log(t),t.includes(e)&&(n.value=e),console.log(n.value)}return(e,s)=>((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",u,[(0,a._)("span",c,(0,i.zw)(e.$t("aphorisms_banner_tile")),1),(0,a._)("span",p,(0,i.zw)(e.$t("aphorisms_banner_subtitle")),1)]),(0,a._)("div",g,[(0,a._)("button",{onClick:s[0]||(s[0]=e=>o("en"))},"English"),(0,a._)("button",{onClick:s[1]||(s[1]=e=>o("zh"))},"中文"),(0,a._)("button",{onClick:s[2]||(s[2]=(...s)=>e.clearMessages&&e.clearMessages(...s))},"Clear")])]))}}),m=n(89);const _=(0,m.Z)(f,[["__scopeId","data-v-f0455d12"]]);var d=_;const v={id:"message-list"},h={class:"message-style"},y={class:"message-text"};var b=(0,a.aZ)({__name:"MessageList",props:{messages:{}},setup(e){return(e,s)=>((0,a.wg)(),(0,a.iD)("ul",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.messages,((e,s)=>((0,a.wg)(),(0,a.iD)("li",{key:s,class:(0,i.C_)(e.style)},[(0,a._)("span",h,(0,i.zw)(e.style)+":",1),(0,a._)("span",y,(0,i.zw)(e.message),1)],2)))),128))]))}});const w=(0,m.Z)(b,[["__scopeId","data-v-80d03e82"]]);var M=w;const O=e=>((0,a.dD)("data-v-65017833"),e=e(),(0,a.Cn)(),e),S=["onSubmit"],k=O((()=>(0,a._)("button",{type:"submit"},"Send",-1)));var j=(0,a.aZ)({__name:"MessageSend",props:{messages:{}},emits:["newMessage"],setup(e,{emit:s}){const n=e,r=(0,o.iH)("");function i(e){const s=e.map((e=>{const s=new Map;return s.set(e.style,e.message),Object.fromEntries(s)}));return JSON.stringify(s)}async function l(e){const s=i(e),n=await fetch("http://127.0.0.1:8080/psychological_counseling",{method:"POST",headers:{"Content-Type":"application/json"},body:s});if(n.ok){const e=await n.json();return new Map(Object.entries(e))}return new Map}async function u(){s("newMessage",{message:r.value,style:"Human"}),r.value="Waiting",console.log(n.messages.slice(1,n.messages.length));const e=await l(n.messages.slice(1,n.messages.length));s("newMessage",{message:e.get("AI"),style:"AI"}),r.value=""}return(e,s)=>((0,a.wg)(),(0,a.iD)("form",{id:"message-form",onSubmit:(0,t.iM)(u,["prevent"])},[(0,a.wy)((0,a._)("input",{type:"text",id:"message-input","onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),required:""},null,512),[[t.nr,r.value]]),k],40,S))}});const I=(0,m.Z)(j,[["__scopeId","data-v-65017833"]]);var C=I,x=(0,a.aZ)({__name:"App",setup(e){const{t:s}=(0,r.QT)(),n=(0,o.iH)([{style:"AI",message:s("how_do_you_feel_today")}]);function t(e){n.value.push(e),localStorage.setItem("historyMessages",JSON.stringify(n.value))}function i(){n.value=[{style:"AI",message:s("how_do_you_feel_today")}],localStorage.removeItem("historyMessages")}return(0,a.bv)((()=>{const e=localStorage.getItem("historyMessages");e&&(n.value=JSON.parse(e))})),(e,s)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(d,{clearMessages:i}),(0,a.Wm)(M,{messages:n.value},null,8,["messages"]),(0,a.Wm)(C,{onNewMessage:t,messages:n.value},null,8,["messages"])],64))}});const D=x;var H=D,Z={en:{how_do_you_feel_today:"How do you feel today?",aphorisms_banner_tile:"Spirit Hole",aphorisms_banner_subtitle:"Know thyself"},zh:{how_do_you_feel_today:"你今天怎么样？",aphorisms_banner_tile:"心灵树洞",aphorisms_banner_subtitle:"认识你自己"}};const z=(0,r.o)({legacy:!1,locale:"en",fallbackLocale:"en",messages:Z}),A=(0,t.ri)(H);A.use(z),A.mount("#app")}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var o=s[t]={exports:{}};return e[t].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(s,t,a,o){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,l=0;l<t.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](t[l])}))?t.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(s=u)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[t,a,o]}}(),function(){n.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(s,{a:s}),s}}(),function(){n.d=function(e,s){for(var t in s)n.o(s,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};n.O.j=function(s){return 0===e[s]};var s=function(s,t){var a,o,r=t[0],i=t[1],l=t[2],u=0;if(r.some((function(s){return 0!==e[s]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var c=l(n)}for(s&&s(t);u<r.length;u++)o=r[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},t=self["webpackChunkspirit_hole_web"]=self["webpackChunkspirit_hole_web"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=n.O(void 0,[998],(function(){return n(3009)}));t=n.O(t)})();
//# sourceMappingURL=app.93d47793.js.map