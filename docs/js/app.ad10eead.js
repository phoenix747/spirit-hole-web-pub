(function(){"use strict";var e={7284:function(e,s,t){var n=t(9242),a=(t(7658),t(3396)),o=t(4870),r=t(7853),i=t(7139),l={en:{how_do_you_feel_today:"How do you feel today?",aphorisms_banner_tile:"Spirit Hole",aphorisms_banner_subtitle:"Know thyself",clear_history:"Clear History"},zh:{how_do_you_feel_today:"你今天怎么样？",aphorisms_banner_tile:"心灵树洞",aphorisms_banner_subtitle:"认识你自己",clear_history:"清除历史"}};const u=(0,r.o)({legacy:!1,locale:"en",fallbackLocale:"en",messages:l}),c=e=>((0,a.dD)("data-v-7dee4a56"),e=e(),(0,a.Cn)(),e),p={id:"aphorisms-banner"},g={class:"tile"},_={id:"aphorisms-banner-title"},f={id:"aphorisms-banner-subtitle"},m={id:"aphorisms-banner-right"},d=c((()=>(0,a._)("option",{value:"en"},"English",-1))),v=c((()=>(0,a._)("option",{value:"zh"},"中文",-1))),h=[d,v];var y=(0,a.aZ)({__name:"AphorismsBanner",props:{clearMessages:{type:Function}},setup(e){const{t:s}=(0,r.QT)(),t=(0,a.Fl)({get:()=>u.global.locale.value,set:e=>{u.global.locale.value=e}});function o(e){t.value=e.target.value}return(e,s)=>((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",g,[(0,a._)("span",_,(0,i.zw)(e.$t("aphorisms_banner_tile")),1),(0,a._)("span",f,(0,i.zw)(e.$t("aphorisms_banner_subtitle")),1)]),(0,a._)("div",m,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),onChange:o},h,544),[[n.bM,t.value]]),(0,a._)("button",{onClick:s[1]||(s[1]=(...s)=>e.clearMessages&&e.clearMessages(...s))},(0,i.zw)(e.$t("clear_history")),1)])]))}}),b=t(89);const w=(0,b.Z)(y,[["__scopeId","data-v-7dee4a56"]]);var M=w;const O={id:"message-list-container"},S={id:"message-list"},j={class:"message-style"},H=["innerHTML"];var I=(0,a.aZ)({__name:"MessageList",props:{messages:{}},setup(e){function s(e){return e.replace(/\n/g,"<br>")}return(e,t)=>((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("ul",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.messages,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:(0,i.C_)(e.style)},[(0,a._)("span",j,(0,i.zw)(e.style)+":",1),(0,a._)("span",{class:"message-text",innerHTML:s(e.message)},null,8,H)],2)))),128))])]))}});const k=(0,b.Z)(I,[["__scopeId","data-v-a269b1c6"]]);var C=k;const D=e=>((0,a.dD)("data-v-0f0837ec"),e=e(),(0,a.Cn)(),e),T={id:"message-send"},x=["onSubmit"],Z=D((()=>(0,a._)("button",{type:"submit"},"Send",-1)));var z=(0,a.aZ)({__name:"MessageSend",props:{messages:{}},emits:["newMessage"],setup(e,{emit:s}){const t=e,r=(0,o.iH)("");function i(e){const s=e.map((e=>{const s=new Map;return s.set(e.style,e.message),Object.fromEntries(s)}));return JSON.stringify(s)}async function l(e){const s=i(e),t=await fetch("https://spirit-hole-api.df.r.appspot.com/psychological_counseling",{method:"POST",headers:{"Content-Type":"application/json"},body:s});if(t.ok){const e=await t.json();return new Map(Object.entries(e))}return new Map}async function u(){s("newMessage",{message:r.value,style:"Human"}),r.value="Waiting";const e=await l(t.messages.slice(1,t.messages.length));s("newMessage",{message:e.get("AI"),style:"AI"}),r.value=""}return(e,s)=>((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("form",{id:"message-form",onSubmit:(0,n.iM)(u,["prevent"])},[(0,a.wy)((0,a._)("input",{type:"text",id:"message-input","onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),required:""},null,512),[[n.nr,r.value]]),Z],40,x)]))}});const A=(0,b.Z)(z,[["__scopeId","data-v-0f0837ec"]]);var L=A,N=(0,a.aZ)({__name:"App",setup(e){const{t:s}=(0,r.QT)(),t=(0,o.iH)([{style:"AI",message:s("how_do_you_feel_today")}]);function n(e){t.value.push(e),localStorage.setItem("historyMessages",JSON.stringify(t.value))}function i(){t.value=[{style:"AI",message:s("how_do_you_feel_today")}],localStorage.removeItem("historyMessages")}return(0,a.bv)((()=>{const e=localStorage.getItem("historyMessages");e&&(t.value=JSON.parse(e))})),(e,s)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(M,{clearMessages:i}),(0,a.Wm)(C,{messages:t.value},null,8,["messages"]),(0,a.Wm)(L,{onNewMessage:n,messages:t.value},null,8,["messages"])],64))}});const W=N;var E=W;const F=(0,n.ri)(E);F.use(u),F.mount("#app")}},s={};function t(n){var a=s[n];if(void 0!==a)return a.exports;var o=s[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(s,n,a,o){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(t.O).every((function(e){return t.O[e](n[l])}))?n.splice(l--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(s=u)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,n){var a,o,r=n[0],i=n[1],l=n[2],u=0;if(r.some((function(s){return 0!==e[s]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)var c=l(t)}for(s&&s(n);u<r.length;u++)o=r[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},n=self["webpackChunkspirit_hole_web"]=self["webpackChunkspirit_hole_web"]||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(7284)}));n=t.O(n)})();